/*! oporrak 2023-05-13 */
document.querySelectorAll(".sortable th").forEach(a=>{a.addEventListener("click",()=>{var e=a.parentElement.parentElement.parentElement,t=Array.prototype.indexOf.call(a.parentElement.children,a),l=a.classList.contains("th-sort-asc");sortTableByColumn(e,t,!l)})});const getCookie=t=>{let l="";return document.cookie.split(";").forEach(e=>{e.includes(t)&&(l=e.split("=")[1])}),l},setCookie=(e,t,l)=>{let a="";var i;l&&((i=new Date).setTime(i.getTime()+24*l*60*60*1e3),a="; expires="+i.toUTCString()),document.cookie=e+"="+(t||"")+a+"; path=/"},deleteCookie=()=>{document.cookie="filtro=; expires=Thu, 01 Jan 1970 00:00:01 GMT; Path=/;"},sortTableByColumn=(e,l,t=!0)=>{const a=t?1:-1;var i,n=e.tBodies[0];for(i of Array.from(n.querySelectorAll("tr")).sort((e,t)=>{e=e.cells[l].textContent;return t.cells[l].textContent<e?a:-1*a}))n.appendChild(i);e.querySelectorAll("th").forEach(e=>e.classList.remove("th-sort-asc","th-sort-desc")),e.querySelector(`th:nth-child(${l+1})`).classList.toggle("th-sort-asc",t),e.querySelector(`th:nth-child(${l+1})`).classList.toggle("th-sort-desc",!t)},arrayFilter=e=>{const l=e.toUpperCase();e=orgList.filter(t=>Object.keys(t).some(e=>JSON.stringify(t[e]).includes(l)));state.querySet=e,state.page=1,buildTable(state)},pagination=(e,t,l)=>{t=(t-1)*l;return{querySet:e.slice(t,t+l),pages:Math.ceil(e.length/l)}},buildTable=e=>{const a=document.getElementById("table-body");var t=pagination(e.querySet,e.page,e.rows),l=t.querySet;a.innerHTML="",l.map(e=>{var t=document.createElement("tr");let l=document.createElement("td");l.classList.add("w-4"),l.innerHTML='<input class="form-check-input m-0 align-middle" type="checkbox" aria-label="Select invoice">',t.appendChild(l),(l=document.createElement("td")).innerHTML=`<div class="d-flex align-items-center">
      <div class="flex-fill">
        <div class="font-weight-medium">${e.NOMUSU}</div>
      </div>
    </div>
    <div class="text-muted">
      <small class="text-reset">Oficina: ${e.DESOFI}</small>
    </div>`,t.appendChild(l),(l=document.createElement("td")).style.display="none",l.value=e.IDUSUA,t.appendChild(l),(l=document.createElement("td")).style.display="none",l.value=e.IDOFIC,t.appendChild(l),a.appendChild(t)}),createPagination(t.pages,e.page)},createPagination=(t,l)=>{let a="<ul>",i,n=l-1,c=l+1;if(1===t&&(a+='<li class="page-item disabled"><a>PÃ¡g</a></li>'),1<l&&(a+=`<li class="page-item previous no"><a onclick="onclickPage(${t}, ${l-1})">&#9664</a></li>`),t<6)for(let e=1;e<=t;e++)i=l===e?"active":"no",a+=`<li class="${i}"><a onclick="onclickPage(${t}, ${e})">${e}</a></li>`;else{2<l&&(a+=`<li class="no page-item"><a onclick="onclickPage(${t}, 1)">1</a></li>`,3<l)&&(a+='<li class="out-of-range"><i>...</i></li>'),1===l?c+=2:2===l&&(c+=1),l===t?n-=2:l===t-1&&--n;for(let e=n;e<=c;e++)0===e&&(e+=1),e>t||(i=l===e?"active":"no",a+=`<li class="${i}"><a onclick="onclickPage(${t}, ${e})">${e}</a></li>`);l<t-1&&(l<t-2&&(a+='<li class="out-of-range"><i>...</i></li>'),a+=`<li class="page-item no"><a onclick="onclickPage(${t}, ${t})">${t}</a></li>`)}l<t&&(a+=`<li class="page-item next no"><a onclick="onclickPage(${t}, ${l+1})">&#9654</a></li>`),a+="</ul>",document.getElementById("pagination-wrapper").innerHTML=a},addUsuarios=()=>{let t=[];document.querySelectorAll("input[type=checkbox]").forEach(e=>{e.checked&&t.push({IDUSUA:e.parentNode.parentNode.cells[2].value,IDOFIC:e.parentNode.parentNode.cells[3].value})}),document.getElementById("arrusu").value=JSON.stringify(t)},onclickPage=(e,t)=>{createPagination(e,t),state.page=t,buildTable(state)};