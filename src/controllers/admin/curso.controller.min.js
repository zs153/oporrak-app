/*! oporrak 2023-05-13 */
import axios from"axios";import{serverAPI,puertoAPI}from"../../config/settings";import{arrEstadosCurso,arrEstadosMatricula,tiposMovimiento,tiposEstado,estadosUsuario}from"../../public/js/enumeraciones";const mainPage=async(t,o)=>{var i=t.user,u=t.query.dir||"next",n=t.query.limit||10,r=t.query.part?t.query.part.toUpperCase():"";let d=!!(t=t.query.cursor?JSON.parse(t.query.cursor):null),c={};c=t?{limit:n+1,direction:u,cursor:JSON.parse(convertCursorToNode(JSON.stringify(t))),part:r}:{limit:n+1,direction:u,cursor:{next:0,prev:0},part:r};try{let r=(await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos`,{context:c})).data.data,s=r.length===n+1,e=0,a=0;s?(e=("next"===u?r[n-1]:r[0]).IDCURS,a=("next"===u?r[0]:r[n-1]).IDCURS,r.pop()):(e="next"===u?0:r[0]?.IDCURS,a="next"===u?r[0]?.IDCURS:0,d=t?(s=0!==e,0!==a):s=!1),"prev"===u&&(r=r.reverse());var t={next:e,prev:a},p={cursos:r,hasNextCursos:s,hasPrevCursos:d,cursor:convertNodeToCursor(JSON.stringify(t)),arrEstadosCurso:arrEstadosCurso};o.render("admin/cursos",{user:i,datos:p})}catch(r){400===r.response?.status?o.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):o.render("admin/error500",{alerts:[{msg:r}]})}},addPage=async(r,s)=>{var r=r.user,e={arrEstadosCurso:arrEstadosCurso};try{s.render("admin/cursos/add",{user:r,datos:e})}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},editPage=async(r,s)=>{var e=r.user;try{var a=await axios.post(`http://${serverAPI}:${puertoAPI}/api/curso`,{context:{IDCURS:r.params.id}}),t={curso:1===a.data.stat?a.data.data[0]:[],arrEstadosCurso:arrEstadosCurso};s.render("admin/cursos/edit",{user:e,datos:t})}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},turnosPage=async(t,o)=>{var i=t.user,u=t.query.dir||"next",n=t.query.limit||10,r=t.query.part?t.query.part.toUpperCase():"";let d=!!(m=t.query.cursor?JSON.parse(t.query.cursor):null),c={};c=m?{idcurs:t.params.id,limit:n+1,direction:u,cursor:JSON.parse(convertCursorToNode(JSON.stringify(m))),part:r}:{idcurs:t.params.id,limit:n+1,direction:u,cursor:{next:0,prev:0},part:r};try{var p=await axios.post(`http://${serverAPI}:${puertoAPI}/api/curso`,{context:{IDCURS:t.params.id}});let r=(await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turnos`,{context:c})).data.data,s=r.length===n+1,e=0,a=0;s?(e=("next"===u?r[n-1]:r[0]).IDTURN,a=("next"===u?r[0]:r[n-1]).IDTURN,r.pop()):(e="next"===u?0:r[0]?.IDTURN,a="next"===u?r[0]?.IDTURN:0,d=m?(s=0!==e,0!==a):s=!1),"prev"===u&&(r=r.reverse());var m={next:e,prev:a},l={curso:p.data.data[0],turnos:r,hasNextTurnos:s,hasPrevTurnos:d,cursor:convertNodeToCursor(JSON.stringify(m))};o.render("admin/cursos/turnos",{user:i,datos:l})}catch(r){400===r.response?.status?o.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):o.render("admin/error500",{alerts:[{msg:r}]})}},addTurnoPage=async(r,s)=>{var e=r.user,a=dateISOToUTCString(new Date),a={INITUR:a,FINTUR:a,INIHOR:"08:00",FINHOR:"14:00"};try{var t={curso:(await axios.post(`http://${serverAPI}:${puertoAPI}/api/curso`,{context:{IDCURS:r.params.id}})).data.data[0],turno:a};s.render("admin/cursos/turnos/add",{user:e,datos:t})}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},editTurnoPage=async(r,s)=>{var e=r.user,a={IDCURS:r.params.idcurs};try{var t=await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turno`,{context:{IDTURN:r.params.idturn}}),o=((t=t.data.data[0]).INITUR=dateISOToUTCString(t.INITUR),t.FINTUR=dateISOToUTCString(t.FINTUR),{curso:a,turno:t});s.render("admin/cursos/turnos/edit",{user:e,datos:o})}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},matriculasPage=async(t,o)=>{var i=t.user,u=t.query.dir||"next",n=t.query.limit||10,r=t.query.part?t.query.part.toUpperCase():"";let d=!!(m=t.query.cursor?JSON.parse(t.query.cursor):null),c={};c=m?{idcurs:t.params.id,limit:n+1,direction:u,cursor:JSON.parse(convertCursorToNode(JSON.stringify(m))),part:r}:{idcurs:t.params.id,limit:n+1,direction:u,cursor:{next:0,prev:0},part:r};try{var p=await axios.post(`http://${serverAPI}:${puertoAPI}/api/curso`,{context:{IDCURS:t.params.id}});let r=(await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/matriculas`,{context:c})).data.data,s=r.length===n+1,e=0,a=0;s?(e=("next"===u?r[n-1]:r[0]).IDMATR,a=("next"===u?r[0]:r[n-1]).IDMATR,r.pop()):(e="next"===u?0:r[0]?.IDMATR,a="next"===u?r[0]?.IDMATR:0,d=m?(s=0!==e,0!==a):s=!1),"prev"===u&&(r=r.reverse());var m={next:e,prev:a},l={curso:p.data.data[0],matriculas:r,hasNextMatriculas:s,hasPrevMatriculas:d,cursor:convertNodeToCursor(JSON.stringify(m)),arrEstadosMatricula:arrEstadosMatricula};o.render("admin/cursos/matriculas",{user:i,datos:l})}catch(r){400===r.response?.status?o.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):o.render("admin/error500",{alerts:[{msg:r}]})}},addMatriculaPage=async(r,s)=>{var e=r.user,a=dateISOToUTCString(new Date),a={STRINI:a,STRFIN:a};try{var t={matricula:a,curso:(await axios.post(`http://${serverAPI}:${puertoAPI}/api/curso`,{context:{IDCURS:r.params.id}})).data.data[0],arrEstadosMatricula:arrEstadosMatricula};s.render("admin/cursos/matriculas/add",{user:e,datos:t})}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},editMatriculaPage=async(r,s)=>{var e=r.user,a={IDCURS:r.params.idcurs};try{var t={curso:a,matricula:(await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/matricula`,{context:{IDMATR:r.params.idmatr}})).data.data[0],arrEstadosMatricula:arrEstadosMatricula};s.render("admin/cursos/matriculas/edit",{user:e,datos:t})}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},usuariosPage=async(t,o)=>{var i=t.user,u=t.query.dir||"next",n=t.query.limit||10,r=t.query.part?t.query.part.toUpperCase():"";let d=!!(m=t.query.cursor?JSON.parse(t.query.cursor):null),c={};c=m?{idcurs:t.params.id,limit:n+1,direction:u,cursor:JSON.parse(convertCursorToNode(JSON.stringify(m))),part:r}:{idcurs:t.params.id,limit:n+1,direction:u,cursor:{next:"",prev:""},part:r};try{var p=await axios.post(`http://${serverAPI}:${puertoAPI}/api/curso`,{context:{IDCURS:t.params.id}});let r=(await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/usuarios`,{context:c})).data.data,s=r.length===n+1,e="",a="";s?(e=("next"===u?r[n-1]:r[0]).NOMUSU,a=("next"===u?r[0]:r[n-1]).NOMUSU,r.pop()):(e="next"===u?"":r[0]?.NOMUSU,a="next"===u?r[0]?.NOMUSU:"",d=m?(s=""!==e,""!==a):s=!1),"prev"===u&&(r=r.sort((r,s)=>r.NOMUSU.localeCompare(s.NOMUSU)));var m={next:e,prev:a},l={curso:p.data.data[0],usuarios:r,hasPrevUsers:d,hasNextUsers:s,cursor:convertNodeToCursor(JSON.stringify(m)),estadosUsuario:estadosUsuario};o.render("admin/cursos/usuarios",{user:i,datos:l})}catch(r){400===r.response?.status?o.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):o.render("admin/error500",{alerts:[{msg:r}]})}},usuariosAddPage=async(o,i)=>{var u=o.user,n=o.query.dir||"next",d=o.query.limit||100,r=o.query.part?o.query.part.toUpperCase():"";let c=!!(l=o.query.cursor?JSON.parse(o.query.cursor):null),p={};p=l?{idcurs:o.params.idcurs,limit:d+1,direction:n,cursor:JSON.parse(convertCursorToNode(JSON.stringify(l))),part:r}:{idcurs:o.params.idcurs,limit:d+1,direction:n,cursor:{next:"",prev:""},part:r};try{var m=await axios.post(`http://${serverAPI}:${puertoAPI}/api/curso`,{context:{IDCURS:o.params.idcurs}});let r=(await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/usuarios/pendientes`,{context:p})).data.data,s=r.length===d+1,e="",a="",t=void 0;s?(t=[{msg:"Se supera el límite de registros permitidos. Sólo se muestran 99 registros. Refine la consulta"}],e=("next"===n?r[d-1]:r[0]).NOMUSU,a=("next"===n?r[0]:r[d-1]).NOMUSU,s=!1,c=!1,r.pop()):(e="next"===n?"":r[0]?.NOMUSU,a="next"===n?r[0]?.NOMUSU:"",c=l?(s=""!==e,""!==a):s=!1),"prev"===n&&(r=r.sort((r,s)=>r.NOMUSU.localeCompare(s.NOMUSU)));var l={next:e,prev:a},U={curso:m.data.data[0],usuarios:r,hasPrevUsers:c,hasNextUsers:s,cursor:convertNodeToCursor(JSON.stringify(l))};i.render("admin/cursos/usuarios/add",{user:u,alerts:t,datos:U})}catch(r){400===r.response?.status?i.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):i.render("admin/error500",{alerts:[{msg:r}]})}},usuariosTurnoPage=async(t,o)=>{var i=t.user,u=t.query.dir||"next",n=t.query.limit||10,r=t.query.part?t.query.part.toUpperCase():"",d={IDCURS:t.params.idcurs};let c=!!(l=t.query.cursor?JSON.parse(t.query.cursor):null),p={};p=l?{idturn:t.params.idturn,limit:n+1,direction:u,cursor:JSON.parse(convertCursorToNode(JSON.stringify(l))),part:r}:{idturn:t.params.idturn,limit:n+1,direction:u,cursor:{next:"",prev:""},part:r};try{var m=await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turno`,{context:{IDTURN:t.params.idturn}});let r=(await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turnos/usuarios`,{context:p})).data.data,s=r.length===n+1,e="",a="";s?(e=("next"===u?r[n-1]:r[0]).NOMUSU,a=("next"===u?r[0]:r[n-1]).NOMUSU,r.pop()):(e="next"===u?"":r[0]?.NOMUSU,a="next"===u?r[0]?.NOMUSU:"",c=l?(s=""!==e,""!==a):s=!1),"prev"===u&&(r=r.sort((r,s)=>r.NOMUSU.localeCompare(s.NOMUSU)));var l={next:e,prev:a},U={curso:d,turno:m.data.data[0],usuarios:r,hasPrevUsers:c,hasNextUsers:s,cursor:convertNodeToCursor(JSON.stringify(l))};o.render("admin/cursos/turnos/usuarios",{user:i,datos:U})}catch(r){400===r.response?.status?o.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):o.render("admin/error500",{alerts:[{msg:r}]})}},usuariosTurnoAddPage=async(o,i)=>{var u=o.user,n=o.query.dir||"next",d=o.query.limit||100,r=o.query.part?o.query.part.toUpperCase():"",c={IDCURS:o.params.idcurs};let p=!!(U=o.query.cursor?JSON.parse(o.query.cursor):null),m={};m=U?{idcurs:o.params.idcurs,idturn:o.params.idturn,limit:d+1,direction:n,cursor:JSON.parse(convertCursorToNode(JSON.stringify(U))),part:r}:{idcurs:o.params.idcurs,idturn:o.params.idturn,limit:d+1,direction:n,cursor:{next:"",prev:""},part:r};try{var l=await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turno`,{context:{IDTURN:o.params.idturn}});let r=(await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turnos/usuarios/pendientes`,{context:m})).data.data,s=r.length===d+1,e="",a="",t=void 0;s?(t=[{msg:"Se supera el límite de registros permitidos. Sólo se muestran 99 registros. Refine la consulta"}],e=("next"===n?r[d-1]:r[0]).NOMUSU,a=("next"===n?r[0]:r[d-1]).NOMUSU,s=!1,p=!1,r.pop()):(e="next"===n?"":r[0]?.NOMUSU,a="next"===n?r[0]?.NOMUSU:"",p=U?(s=""!==e,""!==a):s=!1),"prev"===n&&(r=r.sort((r,s)=>r.NOMUSU.localeCompare(s.NOMUSU)));var U={next:e,prev:a},I={curso:c,turno:l.data.data[0],usuarios:r,hasPrevUsers:p,hasNextUsers:s,cursor:convertNodeToCursor(JSON.stringify(U))};i.render("admin/cursos/turnos/usuarios/add",{user:u,alerts:t,datos:I})}catch(r){400===r.response?.status?i.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):i.render("admin/error500",{alerts:[{msg:r}]})}},usuariosMatriculaPage=async(t,o)=>{var i=t.user,u=t.query.dir||"next",n=t.query.limit||10,r=t.query.part?t.query.part.toUpperCase():"",d={IDCURS:t.params.idcurs};let c=!!(l=t.query.cursor?JSON.parse(t.query.cursor):null),p={};p=l?{idmatr:t.params.idmatr,limit:n+1,direction:u,cursor:JSON.parse(convertCursorToNode(JSON.stringify(l))),part:r}:{idmatr:t.params.idmatr,limit:n+1,direction:u,cursor:{next:"",prev:""},part:r};try{var m=await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/matricula`,{context:{IDMATR:t.params.idmatr}});let r=(await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/matriculas/usuarios`,{context:p})).data.data,s=r.length===n+1,e="",a="";s?(e=("next"===u?r[n-1]:r[0]).NOMUSU,a=("next"===u?r[0]:r[n-1]).NOMUSU,r.pop()):(e="next"===u?"":r[0]?.NOMUSU,a="next"===u?r[0]?.NOMUSU:"",c=l?(s=""!==e,""!==a):s=!1),"prev"===u&&(r=r.sort((r,s)=>r.NOMUSU.localeCompare(s.NOMUSU)));var l={next:e,prev:a},U={curso:d,matricula:m.data.data[0],usuarios:r,hasPrevUsers:c,hasNextUsers:s,cursor:convertNodeToCursor(JSON.stringify(l))};o.render("admin/cursos/matriculas/usuarios",{user:i,datos:U})}catch(r){400===r.response?.status?o.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):o.render("admin/error500",{alerts:[{msg:r}]})}},insert=async(r,s)=>{var e=r.user,r={DESCUR:r.body.descur.toUpperCase(),DURCUR:r.body.durcur,PONCUR:r.body.poncur,NOTCUR:r.body.notcur,STACUR:r.body.stacur},e={USUMOV:e.id,TIPMOV:tiposMovimiento.crearCurso};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/insert`,{curso:r,movimiento:e}),s.redirect("/admin/cursos")}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},update=async(r,s)=>{var e=r.user,r={IDCURS:r.body.idcurs,DESCUR:r.body.descur.toUpperCase(),DURCUR:r.body.durcur,PONCUR:r.body.poncur,NOTCUR:r.body.notcur,STACUR:r.body.stacur},e={USUMOV:e.id,TIPMOV:tiposMovimiento.modificarCurso};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/update`,{curso:r,movimiento:e}),s.redirect("/admin/cursos")}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},remove=async(r,s)=>{var e=r.user,r={IDCURS:r.body.idcurs},e={USUMOV:e.id,TIPMOV:tiposMovimiento.borrarCurso};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/delete`,{curso:r,movimiento:e}),s.redirect("/admin/cursos")}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},insertTurno=async(r,s)=>{var e=r.user,a={IDCURS:r.body.idcurs},r={DESTUR:r.body.destur.toUpperCase(),INITUR:r.body.initur,FINTUR:r.body.fintur,INIHOR:"+00 "+r.body.inihor+":00",FINHOR:"+00 "+r.body.finhor+":00",LOCTUR:r.body.loctur.toUpperCase()},e={USUMOV:e.id,TIPMOV:tiposMovimiento.crearTurno};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turnos/insert`,{curso:a,turno:r,movimiento:e}),s.redirect("/admin/cursos/turnos/"+a.IDCURS)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},updateTurno=async(r,s)=>{var e=r.user;const a=r.body.idcurs;r={IDTURN:r.body.idturn,DESTUR:r.body.destur.toUpperCase(),INITUR:r.body.initur,FINTUR:r.body.fintur,INIHOR:"+00 "+r.body.inihor+":00",FINHOR:"+00 "+r.body.finhor+":00",LOCTUR:r.body.loctur.toUpperCase()},e={USUMOV:e.id,TIPMOV:tiposMovimiento.modificarTurno};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turnos/update`,{turno:r,movimiento:e}),s.redirect("/admin/cursos/turnos/"+a)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},deleteTurno=async(r,s)=>{var e=r.user,a={IDCURS:r.body.idcurs},r={IDTURN:r.body.idturn},e={USUMOV:e.id,TIPMOV:tiposMovimiento.borrarTurno};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turnos/delete`,{curso:a,turno:r,movimiento:e}),s.redirect("/admin/cursos/turnos/"+a.IDCURS)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},insertMatricula=async(r,s)=>{var e=r.user,a={IDCURS:r.body.idcurs},r={DESMAT:r.body.desmat.toUpperCase(),INIMAT:r.body.inimat,FINMAT:r.body.finmat,NOTMAT:r.body.notmat,STAMAT:r.body.stamat},e={USUMOV:e.id,TIPMOV:tiposMovimiento.crearMatricula};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/matriculas/insert`,{curso:a,matricula:r,movimiento:e}),s.redirect("/admin/cursos/matriculas/"+a.IDCURS)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},updateMatricula=async(r,s)=>{var e=r.user;const a=r.body.idcurs;r={IDMATR:r.body.idmatr,DESMAT:r.body.desmat.toUpperCase(),INIMAT:r.body.inimat,FINMAT:r.body.finmat,NOTMAT:r.body.notmat,STAMAT:r.body.stamat},e={USUMOV:e.id,TIPMOV:tiposMovimiento.modificarMatricula};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/matriculas/update`,{matricula:r,movimiento:e}),s.redirect("/admin/cursos/matriculas/"+a)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},deleteMatricula=async(r,s)=>{var e=r.user,a={IDCURS:r.body.idcurs},r={IDMATR:r.body.idmatr},e={USUMOV:e.id,TIPMOV:tiposMovimiento.borrarMatricula};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/matriculas/delete`,{curso:a,matricula:r,movimiento:e}),s.redirect("/admin/cursos/matriculas/"+a.IDCURS)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},insertUsuario=async(r,s)=>{var e=r.user,a={IDCURS:r.body.idcurs},r={ARRUSU:JSON.parse(r.body.arrusu)},e={USUMOV:e.id,TIPMOV:tiposMovimiento.crearUsuarioCurso};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/usuarios/insert`,{curso:a,usuarios:r,movimiento:e}),s.redirect("/admin/cursos/usuarios/"+a.IDCURS)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},deleteUsuario=async(r,s)=>{var e=r.user,a={IDCURS:r.body.idcurs},r={IDUSUA:r.body.idusua},e={USUMOV:e.id,TIPMOV:tiposMovimiento.borrarUsuarioCurso};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/usuarios/delete`,{curso:a,usuario:r,movimiento:e}),s.redirect("/admin/cursos/usuarios/"+a.IDCURS)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},insertUsuarioTurno=async(r,s)=>{var e=r.user;const a=r.body.idcurs;var t={IDTURN:r.body.idturn},o={TIPEST:tiposEstado.formacion.ID},r={ARRUSU:JSON.parse(r.body.arrusu)},e={USUMOV:e.id,TIPMOV:tiposMovimiento.insertarUsuarioTurno};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turnos/usuarios/insert`,{turno:t,tipo:o,usuarios:r,movimiento:e}),s.redirect(`/admin/cursos/turnos/usuarios/${a}/`+t.IDTURN)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},deleteUsuarioTurno=async(r,s)=>{var e=r.user;const a=r.body.idcurs;var t={IDTURN:r.body.idturn},r={IDUSUA:r.body.idusua},e={USUMOV:e.id,TIPMOV:tiposMovimiento.borrarUsuarioTurno};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/turnos/usuarios/delete`,{turno:t,usuario:r,movimiento:e}),s.redirect(`/admin/cursos/turnos/usuarios/${a}/`+t.IDTURN)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},insertUsuarioMatricula=async(r,s)=>{var e=r.user;const a=r.body.idcurs;var t={IDMATR:r.body.idmatr},r={ARRUSU:JSON.parse(r.body.arrusu)},e={USUMOV:e.id,TIPMOV:tiposMovimiento.insertarUsuarioMatricula};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/matriculas/usuarios/insert`,{matricula:t,usuarios:r,movimiento:e}),s.redirect(`/admin/cursos/matriculas/usuarios/${a}/`+t.IDMATR)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},deleteUsuarioMatricula=async(r,s)=>{var e=r.user;const a=r.body.idcurs;var t={IDMATR:r.body.idmatr},r={IDUSUA:r.body.idusua},e={USUMOV:e.id,TIPMOV:tiposMovimiento.borrarUsuarioMatricula};try{await axios.post(`http://${serverAPI}:${puertoAPI}/api/cursos/matriculas/usuarios/delete`,{matricula:t,usuario:r,movimiento:e}),s.redirect(`/admin/cursos/matriculas/usuarios/${a}/`+t.IDMATR)}catch(r){400===r.response?.status?s.render("admin/error400",{alerts:[{msg:r.response.data.msg}]}):s.render("admin/error500",{alerts:[{msg:r}]})}},dateISOToUTCString=r=>{var r=new Date(r),s=6e4*r.getTimezoneOffset();return new Date(r.getTime()-s).toISOString().slice(0,10)},convertNodeToCursor=r=>new Buffer.from(r,"binary").toString("base64"),convertCursorToNode=r=>new Buffer.from(r,"base64").toString("binary");export{mainPage,addPage,editPage,turnosPage,addTurnoPage,editTurnoPage,matriculasPage,addMatriculaPage,editMatriculaPage,usuariosPage,usuariosAddPage,usuariosTurnoPage,usuariosTurnoAddPage,usuariosMatriculaPage,insert,update,remove,insertTurno,updateTurno,deleteTurno,insertMatricula,updateMatricula,deleteMatricula,insertUsuario,deleteUsuario,insertUsuarioTurno,deleteUsuarioTurno,insertUsuarioMatricula,deleteUsuarioMatricula};