/*! oporrak 2023-05-17 */
import{simpleExecute}from"../services/database.js";const baseMatriculasQuery=`SELECT mm.* 
FROM matriculas mm
WHERE mm.idmatr NOT IN (
  SELECT idmatr FROM usuariosmatricula WHERE idusua = :idusua
)
AND sysdate BETWEEN mm.inimat AND mm.finmat
`,baseCursosQuery=`SELECT cc.descur,cc.notcur
FROM usuarioscurso uc
INNER JOIN cursos cc ON cc.idcurs = uc.idcurs
`,findM=async a=>{let s=baseMatriculasQuery;a.STAMAT&&(s+="AND mm.stamat = :stamat");a=await simpleExecute(s,a);return a?{stat:a.rows.length,data:a.rows}:{stat:0,data:[]}},findC=async a=>{let s=baseCursosQuery;a.IDUSUA&&(s+="AND uc.idusua = :idusua");a=await simpleExecute(s,a);return a?{stat:a.rows.length,data:a.rows}:{stat:0,data:[]}};export{findM,findC};