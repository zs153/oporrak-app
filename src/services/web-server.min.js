/*! oporrak 2023-05-18 */
import http from"http";import logger from"morgan";import express from"express";import cookieParser from"cookie-parser";import cors from"cors";import{port}from"../config/settings";import apiOficinaRouter from"../routes/oficina.router";import apiUsuarioRouter from"../routes/usuario.router";import apiMatriculaRouter from"../routes/matricula.router";import apiCursoRouter from"../routes/curso.router";import apiEstadoRouter from"../routes/estado.router";import apiFestivoRouter from"../routes/festivo.router";import apiHistoricoRouter from"../routes/historico.router";import apiFormacionRouter from"../routes/formacion.router";let httpServer;function initialize(){return new Promise((r,o)=>{var e=express();httpServer=http.createServer(e),e.use(logger("dev")),e.use(express.json()),e.use(express.urlencoded({extended:!0})),e.use(cookieParser()),e.use(cors()),e.use("/api",apiOficinaRouter),e.use("/api",apiUsuarioRouter),e.use("/api",apiMatriculaRouter),e.use("/api",apiCursoRouter),e.use("/api",apiEstadoRouter),e.use("/api",apiFestivoRouter),e.use("/api",apiHistoricoRouter),e.use("/api",apiFormacionRouter),httpServer.listen(port).on("listening",()=>{console.log(`Web server listening on conexion: port:${port} `),r()}).on("error",r=>{o(r)})})}function close(){return new Promise((o,e)=>{httpServer.close(r=>{r?e(r):o()})})}module.exports.initialize=initialize,module.exports.close=close;